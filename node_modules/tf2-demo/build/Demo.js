"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const bit_buffer_1 = require("bit-buffer");
const Analyser_1 = require("./Analyser");
const Packet_1 = require("./Data/Packet");
const Parser_1 = require("./Parser");
class Demo {
    static fromNodeBuffer(nodeBuffer) {
        return new Demo(nodeBuffer.buffer);
    }
    constructor(arrayBuffer) {
        this.stream = new bit_buffer_1.BitStream(arrayBuffer);
    }
    getParser(fastMode = false) {
        if (!this.parser) {
            const skippedPackets = fastMode ? [
                Packet_1.PacketTypeId.packetEntities,
                Packet_1.PacketTypeId.tempEntities,
                Packet_1.PacketTypeId.entityMessage
            ] : [];
            this.parser = new Parser_1.Parser(this.stream, skippedPackets);
        }
        return this.parser;
    }
    getAnalyser(fastMode = false) {
        return new Analyser_1.Analyser(this.getParser(fastMode));
    }
}
exports.Demo = Demo;
//# sourceMappingURL=Demo.js.map